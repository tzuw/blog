---
title: Tag
layout: default
description: "满地都是六便士，它却抬头看见了月亮。"
---

<!--
Credits: this page shamelessly borrowed a lot from:
https://github.com/kitian616/jekyll-TeXt-theme
-->
<!-- Page Header -->
{% include intro-header.html type='page' short=true %}

{% include getTagLevelAmounts.html %}

<!-- Main Content -->
<div class="container">
	<div class="row">
		<section class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
			<!-- Tags (as filter) -->
			{% capture tags %}
			{% for tag in site.tags %}
				{%- assign tagName = tag[0] -%}
				{%- if site.data.tagLevels[tagName].level == 1 -%}
				{%- assign tagColorId = 'tag-' | append: site.data.tagLevels[tagName].level | append: '-' | append: firstTagAmount %}
				{%- elsif site.data.tagLevels[tagName].level == 2 -%}
				{%- assign tagColorId = 'tag-' | append: site.data.tagLevels[tagName].level | append: '-' | append: secondTagAmount %}
				{%- elsif site.data.tagLevels[tagName].level == 3 -%}
				{%- assign tagColorId = 'tag-' | append: site.data.tagLevels[tagName].level | append: '-' | append: thirdTagAmount %}
				{%- elsif site.data.tagLevels[tagName].level == 4 -%}
				{%- assign tagColorId = 'tag-' | append: site.data.tagLevels[tagName].level | append: '-' | append:  fourthTagAmount %}
				{%- else -%}
				{%- assign tagColorId = 'tag-0-0' -%}
				{%- endif -%}
				<a data-sort="{{ site.posts.size | minus: tag[1].size | prepend: '0000' | slice: -4, 4 }}"
					data-tags-encode="{{ tag[0] | strip | url_encode }}"
					class="tag-button {{ tagColorId }}"
					title="{{ tag[0] }}" rel="{{ tag[1].size }}">
					#{{ tag[0] }}
					<sup>{{tag[1].size}}</sup>
				</a>
			{% endfor %}
			{% endcapture %}

			<div id='tag_cloud' class="tags js-tags">
				<a class="tag-button--all" data-tags-encode="">
					Show All
					<sup>{{site.posts.size}}</sup>
				</a>
				{{ tags }}
			</div>

            <!-- Article List -->
			{% capture html4ArticleTitles %}
			{%- assign _sorted_list = site.posts -%}
			{%- assign _sorted_list = _sorted_list | sort: 'date' -%}
			{%- assign _sorted_list = _sorted_list | reverse -%}
			{%- for _article in _sorted_list -%}
				{%- assign _tags = '' -%}
				{%- assign _tag_names = '' -%}
				{%- for _tag_entry in _article.tags -%}
					{%- assign _tag_encode = _tag_entry | strip | url_encode -%}
					{%- if forloop.last -%}
						{%- assign _tags = _tags | append: _tag_encode -%}
						{%- assign _tag_names = _tag_names | append: _tag_entry -%}
					{%- else -%}
						{%- assign _tags = _tags | append: _tag_encode | append: ',' -%}
						{%- assign _tag_names = _tag_names | append: _tag_entry | append: ',' -%}
					{%- endif -%}
				{%- endfor -%}

				<!-- capture tags for every article -->
				{% capture article_tags %}
				{% for tag_p in site.tags %}
				{%- if _tag_names contains tag_p[0] -%}
					{%- assign tagName = tag_p[0] -%}
					{%- if site.data.tagLevels[tagName].level == 1 -%}
					{%- assign tagColorId = 'tag-' | append: site.data.tagLevels[tagName].level | append: '-' | append: firstTagAmount %}
					{%- elsif site.data.tagLevels[tagName].level == 2 -%}
					{%- assign tagColorId = 'tag-' | append: site.data.tagLevels[tagName].level | append: '-' | append: secondTagAmount %}
					{%- elsif site.data.tagLevels[tagName].level == 3 -%}
					{%- assign tagColorId = 'tag-' | append: site.data.tagLevels[tagName].level | append: '-' | append: thirdTagAmount %}
					{%- elsif site.data.tagLevels[tagName].level == 4 -%}
					{%- assign tagColorId = 'tag-' | append: site.data.tagLevels[tagName].level | append: '-' | append:  fourthTagAmount %}
					{% else %}
					{%- assign tagColorId = 'tag-0-0' -%}
					{%- endif -%}
				<a data-sort="{{ site.posts.size | minus: tag_p[1].size | prepend: '0000' | slice: -4, 4 }}"
				   data-tags-encode="{{ tag_p[0] | strip | url_encode }}"
				   title="{{ tag_p[0] }}" rel="{{ tag_p[1].size }}">
					#{{ tag_p[0] }}
					<sup>{{tag_p[1].size}}</sup>
				</a>
				{%- endif -%}
				{% endfor %}
				{% endcapture %}

				{% comment %} group by year {% endcomment %}

				{%- assign _currentdate = _article.date | date: '%Y' -%}
					{%- if _currentdate != _date -%}

					{%- unless forloop.first -%}</section>{%- endunless -%}
					<section>
					<!-- section here is used for separate years -->

					<span class="fa listing-seperator">
						<span class="tag-text">{{ _currentdate }}</span>
					</span>
					{%- assign _date = _currentdate -%}
				{%- endif -%}

				<div class="post-preview item" data-tags="{{ _tags }}">
					<a href="{{ _article.url | prepend: site.baseurl }}">
						<h2  class="post-title">
							{{ _article.date | date_to_string }} &nbsp; &nbsp; &nbsp; {{ _article.title }}
						</h2>
						{% if _article.subtitle %}
							<h3 class="post-subtitle">{{ _article.subtitle }}</h3>
						{% endif %}
						{% if post.excerpt %}
						<div class="post-content-preview">
							{{ post.excerpt }}
						</div>
						{% else %}
						{% endif %}
					</a>
					<br/>
					<p class="post-meta js-tags">
						{% if has_article_tags == false %}
						{% else %}
							{{ article_tags }}
						{% endif %}
					</p>
					<hr/>
				</div>

				<h5></h5>
				<!-- h5 is used as a delimiter here -->

			{% endfor %}
			{% endcapture %}
			<div class="mini-post-list js-result">
				<div id="app">
					<archive-pagination item-type="tag">
						<div id="htmlToVue">{{ html4ArticleTitles }}</div>
					</archive-pagination>
				</div>
			</div>
		</section>
	</div>
</div>

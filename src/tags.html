---
title: Tag
layout: default
description: "满地都是六便士，它却抬头看见了月亮。"
header-img: public/assets/img/cement.png
---

<!--
Credits: this page shamelessly borrowed a lot from:
https://github.com/kitian616/jekyll-TeXt-theme
-->
<!-- Page Header -->
{% include intro-header.html type='page' short=true %}

{% comment %} get tag levels from tagLevels.yml {% endcomment %}

{%- assign firstTagCount = 0 -%}
{%- assign secondTagCount = 0 -%}
{%- assign thirdTagCount = 0 -%}
{%- assign fourthTagCount = 0 -%}
{%- assign tagColorId = 'tag-0-0' -%}
{%- for post in site.posts-%}
{%- for tagName in post.tags -%}
	{%- if site.data.tagLevels[tagName].level == 1 -%}
	{%- assign firstTagCount=firstTagCount | plus: 1 -%}
	{%- endif -%}
	{%- if site.data.tagLevels[tagName].level == 2 -%}
	{%- assign secondTagCount=secondTagCount | plus: 1 -%}
	{%- endif -%}
	{%- if site.data.tagLevels[tagName].level == 3 -%}
	{%- assign thirdTagCount=thirdTagCount | plus: 1 -%}
	{%- endif -%}
	{%- if site.data.tagLevels[tagName].level == 4 -%}
	{%- assign fourthTagCount=fourthTagCount | plus: 1 -%}
	{%- endif -%}
{%- endfor -%}
{%- endfor -%}

<!--<h1>{{ firstTagCount }}</h1>-->
<!--<h1>{{ secondTagCount }}</h1>-->
<!--<h1>{{ thirdTagCount }}</h1>-->
<!--<h1>{{ fourthTagCount }}</h1>-->

{%- if firstTagCount < 10 -%}
{%- assign firstTagAmount = 'little' -%}
{%- endif -%}
{%- if firstTagCount >= 10 and firstTagCount < 20 -%}
{%- assign firstTagAmount = 'medium' -%}
{%- endif -%}
{%- if firstTagCount > 20 -%}
{%- assign firstTagAmount = 'lots' -%}
{%- endif -%}

{%- if secondTagCount < 10 -%}
{%- assign secondTagAmount = 'little' -%}
{%- endif -%}
{%- if secondTagCount >= 10 and secondTagCount < 20 -%}
{%- assign secondTagAmount = 'medium' -%}
{%- endif -%}
{%- if secondTagCount > 20 -%}
{%- assign secondTagAmount = 'lots' -%}
{%- endif -%}

{%- if thirdTagCount < 10 -%}
{%- assign thirdTagAmount = 'little' -%}
{%- endif -%}
{%- if thirdTagCount >= 10 and thirdTagCount < 20 -%}
{%- assign thirdTagAmount = 'medium' -%}
{%- endif -%}
{%- if thirdTagCount > 20 -%}
{%- assign thirdTagAmount = 'lots' -%}
{%- endif -%}

{%- if fourthTagCount < 10 -%}
{%- assign fourthTagAmount = 'little' -%}
{%- endif -%}
{%- if fourthTagCount >= 10 and fourthTagCount < 20 -%}
{%- assign fourthTagAmount = 'medium' -%}
{%- endif -%}
{%- if fourthTagCount > 20 -%}
{%- assign fourthTagAmount = 'lots' -%}
{%- endif -%}

<!-- Main Content -->
<div class="container">
	<div class="row">
		<section class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
			<!-- Tags (as filter) -->
			{% capture tags %}
			{% for tag in site.tags %}
				{%- assign tagName = tag[0] -%}
				{%- if site.data.tagLevels[tagName].level == 1 -%}
				{%- assign tagColorId = 'tag-' | append: site.data.tagLevels[tagName].level | append: '-' | append: firstTagAmount %}
				{%- elsif site.data.tagLevels[tagName].level == 2 -%}
				{%- assign tagColorId = 'tag-' | append: site.data.tagLevels[tagName].level | append: '-' | append: secondTagAmount %}
				{%- elsif site.data.tagLevels[tagName].level == 3 -%}
				{%- assign tagColorId = 'tag-' | append: site.data.tagLevels[tagName].level | append: '-' | append: thirdTagAmount %}
				{%- elsif site.data.tagLevels[tagName].level == 4 -%}
				{%- assign tagColorId = 'tag-' | append: site.data.tagLevels[tagName].level | append: '-' | append:  fourthTagAmount %}
				{%- else -%}
				{%- assign tagColorId = 'tag-0-0' -%}
				{%- endif -%}
				<a data-sort="{{ site.posts.size | minus: tag[1].size | prepend: '0000' | slice: -4, 4 }}"
					data-tags-encode="{{ tag[0] | strip | url_encode }}"
					class="{{ tagColorId }}"
					title="{{ tag[0] }}" rel="{{ tag[1].size }}">
					{{ tag[0] }}
					<sup>{{tag[1].size}}</sup>
				</a>
			{% endfor %}
			{% endcapture %}

			<div id='tag_cloud' class="tags tags-sup js-tags">
				<a class="tag-button--all" data-tags-encode="">
					Show All
					<sup>{{site.posts.size}}</sup>
				</a>
				{{ tags }}
			</div>

            <!-- Article List -->
			{% capture html4ArticleTitles %}
			{%- assign _sorted_list = site.posts -%}
			{%- assign _sorted_list = _sorted_list | sort: 'date' -%}
			{%- assign _sorted_list = _sorted_list | reverse -%}
			{%- for _article in _sorted_list -%}
				{%- assign _tags = '' -%}
				{%- assign _tag_names = '' -%}
				{%- for _tag_entry in _article.tags -%}
					{%- assign _tag_encode = _tag_entry | strip | url_encode -%}
					{%- if forloop.last -%}
						{%- assign _tags = _tags | append: _tag_encode -%}
						{%- assign _tag_names = _tag_names | append: _tag_entry -%}
					{%- else -%}
						{%- assign _tags = _tags | append: _tag_encode | append: ',' -%}
						{%- assign _tag_names = _tag_names | append: _tag_entry | append: ',' -%}
					{%- endif -%}
				{%- endfor -%}

				<!-- capture tags for every article -->
				{% capture article_tags %}
				{% for tag_p in site.tags %}
				{%- if _tag_names contains tag_p[0] -%}
					{%- assign tagName = tag_p[0] -%}
					{%- if site.data.tagLevels[tagName].level == 1 -%}
					{%- assign tagColorId = 'tag-' | append: site.data.tagLevels[tagName].level | append: '-' | append: firstTagAmount %}
					{%- elsif site.data.tagLevels[tagName].level == 2 -%}
					{%- assign tagColorId = 'tag-' | append: site.data.tagLevels[tagName].level | append: '-' | append: secondTagAmount %}
					{%- elsif site.data.tagLevels[tagName].level == 3 -%}
					{%- assign tagColorId = 'tag-' | append: site.data.tagLevels[tagName].level | append: '-' | append: thirdTagAmount %}
					{%- elsif site.data.tagLevels[tagName].level == 4 -%}
					{%- assign tagColorId = 'tag-' | append: site.data.tagLevels[tagName].level | append: '-' | append:  fourthTagAmount %}
					{% else %}
					{%- assign tagColorId = 'tag-0-0' -%}
					{%- endif -%}
				<a data-sort="{{ site.posts.size | minus: tag_p[1].size | prepend: '0000' | slice: -4, 4 }}"
				   data-tags-encode="{{ tag_p[0] | strip | url_encode }}"
				   class="tag-button {{ tagColorId }}"
				   title="{{ tag_p[0] }}" rel="{{ tag_p[1].size }}">
					{{ tag_p[0] }}
					<sup>{{tag_p[1].size}}</sup>
				</a>
				{%- endif -%}
				{% endfor %}
				{% endcapture %}

				{% comment %} group by year {% endcomment %}

				{%- assign _currentdate = _article.date | date: '%Y' -%}
					{%- if _currentdate != _date -%}

					{%- unless forloop.first -%}</section>{%- endunless -%}
					<section>
					<!-- section here is used for separate years -->

					<span class="fa listing-seperator">
						<span class="tag-text">{{ _currentdate }}</span>
					</span>
					{%- assign _date = _currentdate -%}
				{%- endif -%}

				<div class="post-preview item" data-tags="{{ _tags }}">
					<a href="{{ _article.url | prepend: site.baseurl }}">
						<h2  class="post-title">
							{{ _article.date | date_to_string }} &nbsp; &nbsp; &nbsp; {{ _article.title }}
						</h2>
						{% if _article.subtitle %}
							<h3 class="post-subtitle">{{ _article.subtitle }}</h3>
						{% endif %}
					<!-- capture tags for every article -->
					<div class="post-content-preview">
						{% if post.lang == 'en' %}
						{{ _article.content | strip_html | truncate:300 }}
						{% else %}
						{{ _article.content | strip_html | truncate:200 }}
						{% endif %}
					</div>
					</a>
					<br/>
					<p class="post-meta">
						{{ _article.date | date: "%B %-d, %Y" }} &nbsp;|&nbsp;
						约{{ _article.content | strip_html | strip_newlines | remove: " " | size | divided_by: 350 | plus: 1 }}分钟读完
						大约{{ _article.content | strip_html | strip_newlines | remove: " " | size }}个字
						{% if has_article_tags == false %}
						{% else %}
							&nbsp;|&nbsp;
							<span id='tag_cloud' class="tags tags-sup js-tags">
							{{ article_tags }}
							</span>
						{% endif %}
						<span class="tags tags-sup js-categories">
                        {% for category in _article.categories %}
							<a href="{{ site.baseurl }}/categories.html?categories={{ category }}" title="{{ category }}"><font color="#9acd32">☖{{ category }}</font></a>
                        {% endfor %}
                        </span>
					</p>
					<hr/>
				</div>

				<h5></h5>
				<!-- h5 is used as a delimiter here -->

			{% endfor %}
			{% endcapture %}
			<div class="mini-post-list js-result">
				<div id="app">
					<archive-pagination>
						<div id="tag_click">{{ html4ArticleTitles }}</div>
					</archive-pagination>
				</div>
			</div>
		</section>
	</div>
</div>
